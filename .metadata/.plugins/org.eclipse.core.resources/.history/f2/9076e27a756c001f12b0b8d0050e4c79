package application;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.Locale;
import java.util.Scanner;

public class Program {

	public static void main(String[] args) {
		Locale.setDefault(Locale.US);
		Scanner sc = new Scanner(System.in);
		
		System.out.print("Informe o caminho do arquivo.csv: ");
		String caminhoArquivo = sc.nextLine();
		
		// Cria um objeto File para o arquivo CSV
        File arquivoCSV = new File(caminhoArquivo);        
        // Obtém o diretório onde o arquivo CSV está localizado
        String diretorioCSV = arquivoCSV.getParent();        
        // Cria um objeto File para a pasta 'out' no mesmo diretório do arquivo CSV
        File pastaSaida = new File(diretorioCSV, "out");
        
        // Verifica se a pasta 'out' existe; se não, cria
        if (!pastaSaida.exists()) {
            pastaSaida.mkdir();
        }
        
        // Define o caminho para o novo arquivo "summary.csv" dentro da pasta 'out'
        String caminhoNovoArquivo = pastaSaida + File.separator + "summary.csv";
		
        try (BufferedReader leitor = new BufferedReader(new FileReader(caminhoArquivo))) {
            String linha = leitor.readLine();
            
			try (BufferedReader br = new BufferedReader(new FileReader(caminhoArquivo))) {
				String linha = br.readLine();
				
				while(linha != null) {
					String[] dados = linha.split(",");
					
					String nome = dados[0];
					double precoUnitario = Double.parseDouble(dados[1]);
					int quantidade = Integer.parseInt(dados[2]);					
					double valorTotal = precoUnitario * quantidade;
					
					br.write(nome + ", " + String.format("%.2f", valorTotal));
                    br.newLine();
					
					linha = br.readLine();
				}
			}
			catch (IOException e){
				System.err.println("Erro ao escrever no arquivo summary.csv: " + e.getMessage());
			}
        }
        catch (IOException e) {
        	System.err.println("Erro ao ler o arquivo CSV: " + e.getMessage());        	
        }
		
		
		
		
		
		
		
		
		sc.close();
			

	}

}
